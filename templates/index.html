<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>House Price Predictor</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <style>
      body {
        background: url("{{ url_for('static', filename='download.jpg') }}") no-repeat center center fixed;
        background-size: cover;
      }
      .card {
        background-color: #ffffff;
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      }
      .btn-custom {
        background-color: #0d6efd; 
        color: white;
        border: none;
      }
      .btn-custom:hover {
        background-color: #0b5ed7;
      }
    </style>
  </head>
  <body>


    <div class="d-flex justify-content-center align-items-center vh-100">
      <div class="card p-4" style="width: 400px;">
        <h3 class="text-center mb-4">House Price Predictor</h3>

        <form method="post" , accept-charset="utf-8" >

          <div class="mb-3">
            <label for="location" class="form-label">Location</label>
            <select class="form-select" id="location" name="location" required="1">

              {% for location in locations %}

                <option value="{{ location }}">{{ location }}</option>

              {% endfor %}

            </select>
          </div>



          <div class="mb-3">
            <label for="size" class="form-label">Size (sqft)</label>
            <input type="number" class="form-control" id="size" name="size" required="1" placeholder="Enter Number of Bedrooms">

          </div>


          <div class="mb-3">
            <label for="bedrooms" class="form-label">Number of Bedrooms</label>
            <input type="number" class="form-control" id="bedrooms" name="bedrooms" required="1" placeholder="Enter Number of Bedrooms">
          </div>


          <div class="mb-3">
            <label for="bathrooms" class="form-label">Number of Bathrooms</label>
            <input type="number" class="form-control" id="bathrooms" name="bathrooms" required="1" placeholder="Enter Number of Bathrooms">
          </div>


          <div class="d-grid">
            <button type="submit" class="btn btn-custom" onclick="send_data()">Predict  Price</button>
          </div>


          <div class="text-center mt-3">
            <strong>Predicted Price: </strong>
            <span id="predictedPrice" class="text-success"></span>
          </div>

        </form>

      </div>
    </div>


    <script>

        function form_handler(event){
            event.preventDefault()
        }

        function send_data(){

            document.querySelector('form').addEventListener('submit', form_handler)

            var fd = new FormData(document.querySelector('form'));

            var xhr = new XMLHttpRequest();

            xhr.open('POST' , '/predict' , true)

            document.getElementById('predictedPrice'). innerHTML = "Wait Predicting Price!...";
     
            xhr.onreadystatechange = function(){
                if(xhr.readyState == XMLHttpRequest.DONE){
                    document.getElementById('predictedPrice'). innerHTML =" â‚¹ " +  xhr.responseText;
                }
            };

            xhr.onload = function(){};
            xhr.send(fd);

        }

    </script>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
  </body>
</html>
